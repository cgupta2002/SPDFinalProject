{% extends 'base.html' %}
{% block title %}Conversation with {{ other_user.name }}{% endblock %}
{% block content %}
<main class="container p-5">
    <h2>Conversation with {{ other_user.name }}</h2>
    <div class="message-list">
        {% for message in messages %}
        <div class="message {% if message.sender_id == session['user_id'] %}sent{% else %}received{% endif %}">
            <strong>{{ message.sender_name }}:</strong>
            <p>{{ message.content }}</p>
            <small>{{ message.timestamp }}</small>
        </div>
        {% endfor %}
    </div>
    <form action="{{ url_for('send_message', receiver_id=other_user.user_id) }}" method="POST" class="mt-3">
        <div class="form-group">
            <textarea name="content" class="form-control" rows="3" placeholder="Type a message..." required></textarea>
        </div>
        <button type="submit" class="btn btn-primary mt-2">Send</button>
    </form>
</main>
{% endblock %}